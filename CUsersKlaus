{"openapi":"3.1.0","info":{"title":"AEGIS RAG API","description":"Agentic Enterprise Graph Intelligence System - Production-ready RAG API","version":"0.1.0"},"paths":{"/health/memory/":{"get":{"tags":["health","health","memory"],"summary":"Overall memory system health","description":"Check health of all 3 memory layers","operationId":"memory_health_check_health_memory__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Memory Health Check Health Memory  Get"}}}}}}},"/health/memory/redis":{"get":{"tags":["health","health","memory"],"summary":"Redis memory health","description":"Health check for Redis working memory (Layer 1)","operationId":"redis_health_health_memory_redis_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Redis Health Health Memory Redis Get"}}}}}}},"/health/memory/qdrant":{"get":{"tags":["health","health","memory"],"summary":"Qdrant memory health","description":"Health check for Qdrant episodic memory (Layer 2)","operationId":"qdrant_health_health_memory_qdrant_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Qdrant Health Health Memory Qdrant Get"}}}}}}},"/health/memory/graphiti":{"get":{"tags":["health","health","memory"],"summary":"Graphiti memory health","description":"Health check for Graphiti long-term memory (Layer 3)","operationId":"graphiti_health_health_memory_graphiti_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Graphiti Health Health Memory Graphiti Get"}}}}}}},"/health/memory/metrics":{"get":{"tags":["health","health","memory"],"summary":"Memory metrics summary","description":"Aggregate metrics across all memory layers","operationId":"memory_metrics_health_memory_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Memory Metrics Health Memory Metrics Get"}}}}}}},"/health":{"get":{"tags":["health"],"summary":"Health check endpoint","description":"Check health of all system components","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/health/live":{"get":{"tags":["health"],"summary":"Liveness probe","description":"Simple liveness check for Kubernetes","operationId":"liveness_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Liveness Health Live Get"}}}}}}},"/health/ready":{"get":{"tags":["health"],"summary":"Readiness probe","description":"Readiness check for Kubernetes","operationId":"readiness_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Readiness Health Ready Get"}}}}}}},"/api/v1/health/":{"get":{"tags":["health"],"summary":"Health Check","description":"Basic health check - lightweight endpoint for load balancers.\n\nReturns:\n    HealthStatus indicating service is running\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/health/\"\n    ```","operationId":"health_check_api_v1_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/src__api__v1__health__HealthStatus"}}}}}}},"/api/v1/health/detailed":{"get":{"tags":["health"],"summary":"Detailed Health Check","description":"Detailed health check with dependency status.\n\nChecks connectivity to:\n- Qdrant vector database\n- Ollama embedding service\n- (Future: Neo4j, Redis)\n\nReturns:\n    DetailedHealthResponse with all dependency statuses\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/health/detailed\"\n    ```","operationId":"detailed_health_check_api_v1_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DetailedHealthResponse"}}}}}}},"/api/v1/health/ready":{"get":{"tags":["health"],"summary":"Readiness Check","description":"Readiness check - indicates if service can handle requests.\n\nReturns 200 if all critical dependencies are available, 503 otherwise.\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/health/ready\"\n    ```","operationId":"readiness_check_api_v1_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health/live":{"get":{"tags":["health"],"summary":"Liveness Check","description":"Liveness check - indicates if service is alive.\n\nAlways returns 200 unless application is completely broken.\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/health/live\"\n    ```","operationId":"liveness_check_api_v1_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/retrieval/search":{"post":{"tags":["retrieval"],"summary":"Search","description":"Search documents using vector, BM25, or hybrid search.\n\nRequires authentication (if enabled). Rate limited to 10 requests/minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    search_params: Search request parameters\n    current_user: Authenticated user (from JWT token)\n\nReturns:\n    SearchResponse with ranked results\n\nExample:\n    ```bash\n    # With authentication\n    curl -X POST \"http://localhost:8000/api/v1/retrieval/search\" \\\n         -H \"Content-Type: application/json\" \\\n         -H \"Authorization: Bearer <your-token>\" \\\n         -d '{\"query\": \"What is RAG?\", \"search_type\": \"hybrid\", \"top_k\": 10}'\n    ```","operationId":"search_api_v1_retrieval_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/retrieval/ingest":{"post":{"tags":["retrieval"],"summary":"Ingest","description":"Ingest documents from directory into vector database.\n\nRequires authentication (if enabled). Rate limited to 5 requests/hour.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    ingest_params: Ingestion request parameters\n    background_tasks: FastAPI background tasks\n    current_user: Authenticated user (from JWT token)\n\nReturns:\n    IngestionResponse with statistics\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/retrieval/ingest\" \\\n         -H \"Content-Type: application/json\" \\\n         -H \"Authorization: Bearer <your-token>\" \\\n         -d '{\"input_dir\": \"./data/documents\", \"chunk_size\": 512}'\n    ```","operationId":"ingest_api_v1_retrieval_ingest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/retrieval/upload":{"post":{"tags":["retrieval"],"summary":"Upload File","description":"Upload and index a single document file.\n\nSprint 11 Feature 11.3: Unified Ingestion Pipeline\n- Indexes to Qdrant + BM25 + Neo4j in parallel\n- Returns statistics for all systems\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    file: Uploaded file (PDF, TXT, MD, DOCX, CSV)\n    current_user: Authenticated user (optional)\n\nReturns:\n    IngestionResponse with indexing statistics for all systems\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/retrieval/upload\" \\\n         -F \"file=@document.pdf\"\n    ```","operationId":"upload_file_api_v1_retrieval_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_api_v1_retrieval_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/retrieval/prepare-bm25":{"post":{"tags":["retrieval"],"summary":"Prepare Bm25","description":"Prepare BM25 index from Qdrant collection.\n\nThis endpoint loads all documents from Qdrant and builds the BM25 index.\nShould be called once after document ingestion.\n\nRequires authentication (if enabled). Rate limited to 2 requests/hour.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    current_user: Authenticated user (from JWT token)\n\nReturns:\n    Statistics about BM25 indexing\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/retrieval/prepare-bm25\" \\\n         -H \"Authorization: Bearer <your-token>\"\n    ```","operationId":"prepare_bm25_api_v1_retrieval_prepare_bm25_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/retrieval/stats":{"get":{"tags":["retrieval"],"summary":"Get Stats","description":"Get retrieval system statistics.\n\nReturns:\n    Statistics about indexed documents and search performance\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/retrieval/stats\"\n    ```","operationId":"get_stats_api_v1_retrieval_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/retrieval/auth/token":{"post":{"tags":["retrieval"],"summary":"Login","description":"Authenticate and get JWT access token.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    credentials: Token request with credentials\n\nReturns:\n    TokenResponse with JWT access token\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/retrieval/auth/token\" \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\"username\": \"admin\", \"password\": \"admin123\"}'\n    ```","operationId":"login_api_v1_retrieval_auth_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/reindex":{"post":{"tags":["admin"],"summary":"Re-index all documents","description":"Atomically rebuild all indexes (Qdrant + BM25 + Neo4j) with BGE-M3 embeddings. Progress tracked via SSE.","operationId":"reindex_all_documents_api_v1_admin_reindex_post","parameters":[{"name":"input_dir","in":"query","required":false,"schema":{"type":"string","description":"Directory containing documents to index","default":"data/sample_documents","title":"Input Dir"},"description":"Directory containing documents to index"},{"name":"dry_run","in":"query","required":false,"schema":{"type":"boolean","description":"Simulate operation without making changes","default":false,"title":"Dry Run"},"description":"Simulate operation without making changes"},{"name":"confirm","in":"query","required":false,"schema":{"type":"boolean","description":"Confirmation required to execute (safety check)","default":false,"title":"Confirm"},"description":"Confirmation required to execute (safety check)"}],"responses":{"200":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/":{"post":{"tags":["chat","chat"],"summary":"Chat","description":"Process a chat query through the RAG system.\n\nThis endpoint:\n1. Validates the query\n2. Generates/validates session_id\n3. Processes query through CoordinatorAgent\n4. Extracts answer and sources\n5. Returns structured response\n\nArgs:\n    request: ChatRequest with query and optional session_id\n\nReturns:\n    ChatResponse with answer, sources, and metadata\n\nRaises:\n    HTTPException: If query processing fails","operationId":"chat_api_v1_chat__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/stream":{"post":{"tags":["chat","chat"],"summary":"Chat Stream","description":"Stream chat response using Server-Sent Events (SSE).\n\nSprint 15 Feature 15.1: SSE Streaming Endpoint (ADR-020)\n\nThis endpoint:\n1. Validates the query\n2. Generates/validates session_id\n3. Streams tokens and metadata from CoordinatorAgent in real-time\n4. Sends sources as they become available\n5. Returns SSE-formatted stream\n\nArgs:\n    request: ChatRequest with query and optional session_id\n\nReturns:\n    StreamingResponse with text/event-stream media type\n\nSSE Message Format:\n    data: {\"type\": \"metadata\", \"session_id\": \"...\", \"timestamp\": \"...\"}\n    data: {\"type\": \"token\", \"content\": \"Hello\"}\n    data: {\"type\": \"source\", \"source\": {...}}\n    data: [DONE]","operationId":"chat_stream_api_v1_chat_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/sessions":{"get":{"tags":["chat","chat"],"summary":"List Sessions","description":"List all active conversation sessions.\n\nSprint 15 Feature 15.5: Session Management for History Sidebar\n\nReturns:\n    SessionListResponse with list of session information\n\nRaises:\n    HTTPException: If listing fails","operationId":"list_sessions_api_v1_chat_sessions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionListResponse"}}}}}}},"/api/v1/chat/history/{session_id}":{"get":{"tags":["chat","chat"],"summary":"Get Conversation History","description":"Retrieve conversation history for a session.\n\nArgs:\n    session_id: Session ID to retrieve history for\n\nReturns:\n    ConversationHistoryResponse with message history\n\nRaises:\n    HTTPException: If session not found or retrieval fails","operationId":"get_conversation_history_api_v1_chat_history__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["chat","chat"],"summary":"Delete Conversation History","description":"Delete conversation history for a session.\n\nArgs:\n    session_id: Session ID to delete\n\nReturns:\n    SessionDeleteResponse with status\n\nRaises:\n    HTTPException: If deletion fails","operationId":"delete_conversation_history_api_v1_chat_history__session_id__delete","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/src__api__v1__chat__SessionDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/search":{"post":{"tags":["memory","memory"],"summary":"Unified Memory Search","description":"Search across multiple memory layers with intelligent routing.\n\nThis endpoint performs unified search across the 3-layer memory system:\n- Layer 1 (SHORT_TERM): Redis working memory for recent context\n- Layer 2 (LONG_TERM): Qdrant vector store for semantic facts\n- Layer 3 (EPISODIC): Graphiti temporal graph for episodic memory\n\nIf `layers` is not specified, the system automatically routes the query\nto appropriate layers based on temporal signals and query intent.\n\nRate limited to 20 requests per minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    search_params: Memory search parameters\n\nReturns:\n    MemorySearchResponse with results grouped by layer\n\nRaises:\n    HTTPException: 400 for invalid parameters, 500 for internal errors\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/memory/search\" \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\n            \"query\": \"What did we discuss about RAG?\",\n            \"session_id\": \"session_123\",\n            \"top_k\": 5\n         }'\n    ```","operationId":"unified_memory_search_api_v1_memory_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemorySearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemorySearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/temporal/point-in-time":{"post":{"tags":["memory","memory"],"summary":"Point In Time Query","description":"Query memory state at a specific point in time (bi-temporal query).\n\nRetrieves entity or memory states as they existed at a specific point in time,\nusing bi-temporal modeling (valid time + transaction time).\n\nThis is useful for:\n- Historical analysis: \"What did we know about X on date Y?\"\n- Temporal reasoning: \"When did entity Z change?\"\n- Audit trails: \"What was the state before/after an event?\"\n\nRate limited to 15 requests per minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    query_params: Point-in-time query parameters\n\nReturns:\n    PointInTimeQueryResponse with historical results\n\nRaises:\n    HTTPException: 400 for invalid parameters, 500 for internal errors\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/memory/temporal/point-in-time\" \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\n            \"query\": \"OpenAI\",\n            \"timestamp\": \"2024-01-15T10:30:00Z\",\n            \"top_k\": 5\n         }'\n    ```","operationId":"point_in_time_query_api_v1_memory_temporal_point_in_time_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PointInTimeQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PointInTimeQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/session/{session_id}":{"get":{"tags":["memory","memory"],"summary":"Get Session Context","description":"Retrieve full context for a conversation session.\n\nReturns all messages and metadata for a specific session from\nshort-term (Redis) memory.\n\nRate limited to 30 requests per minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    session_id: Session identifier\n\nReturns:\n    SessionContextResponse with session messages and summary\n\nRaises:\n    HTTPException: 404 if session not found, 500 for internal errors\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/memory/session/session_123\"\n    ```","operationId":"get_session_context_api_v1_memory_session__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionContextResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["memory","memory"],"summary":"Delete Session","description":"Delete a session and all associated short-term memory.\n\nRemoves the session's conversation context from Redis working memory.\nNote: This only affects short-term memory. Episodic memories in Graphiti\nare not deleted.\n\nRate limited to 10 requests per minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    session_id: Session identifier to delete\n\nReturns:\n    SessionDeleteResponse with deletion status\n\nRaises:\n    HTTPException: 500 for internal errors\n\nExample:\n    ```bash\n    curl -X DELETE \"http://localhost:8000/api/v1/memory/session/session_123\"\n    ```","operationId":"delete_session_api_v1_memory_session__session_id__delete","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/src__api__v1__memory__SessionDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/consolidate":{"post":{"tags":["memory","memory"],"summary":"Trigger Consolidation","description":"Manually trigger memory consolidation between layers.\n\nConsolidates memories from short-term (Redis) to long-term (Qdrant)\nand/or episodic (Graphiti) storage based on access patterns and policies.\n\nConsolidation moves frequently accessed or important memories from\nfast, temporary storage to permanent, structured storage.\n\nRate limited to 5 requests per hour (expensive operation).\n\nArgs:\n    request: FastAPI request (for rate limiting)\n    consolidation_params: Consolidation configuration options\n\nReturns:\n    ConsolidationResponse with consolidation statistics\n\nRaises:\n    HTTPException: 500 for internal errors\n\nExample:\n    ```bash\n    curl -X POST \"http://localhost:8000/api/v1/memory/consolidate\" \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\n            \"consolidate_to_qdrant\": true,\n            \"consolidate_conversations\": true,\n            \"active_sessions\": [\"session_123\", \"session_456\"]\n         }'\n    ```","operationId":"trigger_consolidation_api_v1_memory_consolidate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsolidationRequest","default":{"consolidate_to_qdrant":true,"consolidate_conversations":true}}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsolidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/stats":{"get":{"tags":["memory","memory"],"summary":"Get Memory Stats","description":"Get comprehensive memory system statistics across all layers.\n\nProvides metrics and statistics for:\n- Redis short-term memory (connection, keys, TTL info)\n- Qdrant long-term memory (collection stats, point counts)\n- Graphiti episodic memory (entity/relationship counts)\n- Consolidation pipeline (last run, success rates)\n\nRate limited to 30 requests per minute.\n\nArgs:\n    request: FastAPI request (for rate limiting)\n\nReturns:\n    MemoryStatsResponse with statistics for all layers\n\nRaises:\n    HTTPException: 500 for internal errors\n\nExample:\n    ```bash\n    curl \"http://localhost:8000/api/v1/memory/stats\"\n    ```","operationId":"get_memory_stats_api_v1_memory_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryStatsResponse"}}}}}}},"/api/v1/graph/visualize/subgraph":{"get":{"tags":["visualization","visualization"],"summary":"Get custom subgraph visualization","description":"Retrieve a visualization of a custom subgraph starting from multiple entities","operationId":"visualize_custom_subgraph_api_v1_graph_visualize_subgraph_get","parameters":[{"name":"entity_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"},"description":"List of entity IDs","title":"Entity Ids"},"description":"List of entity IDs"},{"name":"depth","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":1,"description":"Traversal depth","default":1,"title":"Depth"},"description":"Traversal depth"},{"name":"max_nodes","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum nodes to return","default":100,"title":"Max Nodes"},"description":"Maximum nodes to return"},{"name":"format","in":"query","required":false,"schema":{"enum":["d3","cytoscape","visjs"],"type":"string","description":"Output format (d3, cytoscape, visjs)","default":"d3","title":"Format"},"description":"Output format (d3, cytoscape, visjs)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisualizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/visualize/{entity_id}":{"get":{"tags":["visualization","visualization"],"summary":"Get entity neighborhood visualization","description":"Retrieve a visualization of the entity's neighborhood graph","operationId":"visualize_entity_neighborhood_api_v1_graph_visualize__entity_id__get","parameters":[{"name":"entity_id","in":"path","required":true,"schema":{"type":"string","title":"Entity Id"}},{"name":"depth","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":1,"description":"Traversal depth","default":1,"title":"Depth"},"description":"Traversal depth"},{"name":"max_nodes","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum nodes to return","default":100,"title":"Max Nodes"},"description":"Maximum nodes to return"},{"name":"format","in":"query","required":false,"schema":{"enum":["d3","cytoscape","visjs"],"type":"string","description":"Output format (d3, cytoscape, visjs)","default":"d3","title":"Format"},"description":"Output format (d3, cytoscape, visjs)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisualizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/visualize/community/{community_id}":{"get":{"tags":["visualization","visualization"],"summary":"Get community graph visualization","description":"Retrieve a visualization of entities within a specific community","operationId":"visualize_community_api_v1_graph_visualize_community__community_id__get","parameters":[{"name":"community_id","in":"path","required":true,"schema":{"type":"string","title":"Community Id"}},{"name":"max_nodes","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum nodes to return","default":100,"title":"Max Nodes"},"description":"Maximum nodes to return"},{"name":"format","in":"query","required":false,"schema":{"enum":["d3","cytoscape","visjs"],"type":"string","description":"Output format (d3, cytoscape, visjs)","default":"d3","title":"Format"},"description":"Output format (d3, cytoscape, visjs)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisualizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/analytics/centrality/{entity_id}":{"get":{"tags":["analytics","analytics"],"summary":"Get centrality metrics for entity","description":"Calculate centrality metrics (degree, betweenness, closeness, eigenvector) for an entity","operationId":"get_entity_centrality_api_v1_graph_analytics_centrality__entity_id__get","parameters":[{"name":"entity_id","in":"path","required":true,"schema":{"type":"string","title":"Entity Id"}},{"name":"metric","in":"query","required":false,"schema":{"enum":["degree","betweenness","closeness","eigenvector"],"type":"string","description":"Centrality metric to calculate","default":"degree","title":"Metric"},"description":"Centrality metric to calculate"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CentralityMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/analytics/pagerank":{"get":{"tags":["analytics","analytics"],"summary":"Get PageRank scores","description":"Calculate PageRank scores for top entities","operationId":"get_pagerank_scores_api_v1_graph_analytics_pagerank_get","parameters":[{"name":"top_k","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of top entities","default":10,"title":"Top K"},"description":"Number of top entities"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Pagerank Scores Api V1 Graph Analytics Pagerank Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/analytics/influential":{"get":{"tags":["analytics","analytics"],"summary":"Get most influential entities","description":"Find the most influential entities by PageRank","operationId":"get_influential_entities_api_v1_graph_analytics_influential_get","parameters":[{"name":"top_k","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of top entities","default":10,"title":"Top K"},"description":"Number of top entities"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Influential Entities Api V1 Graph Analytics Influential Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/analytics/gaps":{"get":{"tags":["analytics","analytics"],"summary":"Detect knowledge gaps","description":"Identify knowledge gaps (orphan entities, sparse areas, isolated components)","operationId":"detect_knowledge_gaps_api_v1_graph_analytics_gaps_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Detect Knowledge Gaps Api V1 Graph Analytics Gaps Get"}}}}}}},"/api/v1/graph/analytics/recommendations/{entity_id}":{"get":{"tags":["analytics","analytics"],"summary":"Get entity recommendations","description":"Get recommendations for similar or related entities","operationId":"get_entity_recommendations_api_v1_graph_analytics_recommendations__entity_id__get","parameters":[{"name":"entity_id","in":"path","required":true,"schema":{"type":"string","title":"Entity Id"}},{"name":"method","in":"query","required":false,"schema":{"enum":["collaborative","community","relationships","attributes"],"type":"string","description":"Recommendation method (collaborative, community, relationships, attributes)","default":"collaborative","title":"Method"},"description":"Recommendation method (collaborative, community, relationships, attributes)"},{"name":"top_k","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Number of recommendations","default":5,"title":"Top K"},"description":"Number of recommendations"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Recommendation"},"title":"Response Get Entity Recommendations Api V1 Graph Analytics Recommendations  Entity Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/analytics/statistics":{"get":{"tags":["analytics","analytics"],"summary":"Get graph statistics","description":"Get overall graph statistics and metrics","operationId":"get_graph_statistics_api_v1_graph_analytics_statistics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphStatistics"}}}}}}},"/api/v1/graph/viz/export":{"post":{"tags":["graph-visualization"],"summary":"Export Graph","description":"Export graph in specified format.\n\nSprint 12: Supports JSON, GraphML, and Cytoscape formats.\n\nArgs:\n    request: Export configuration\n\nReturns:\n    Exported graph data in requested format","operationId":"export_graph_api_v1_graph_viz_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphExportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Export Graph Api V1 Graph Viz Export Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/viz/export/formats":{"get":{"tags":["graph-visualization"],"summary":"Get Export Formats","description":"Get supported export formats.\n\nReturns:\n    List of supported formats with descriptions","operationId":"get_export_formats_api_v1_graph_viz_export_formats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Response Get Export Formats Api V1 Graph Viz Export Formats Get"}}}}}}},"/api/v1/graph/viz/filter":{"post":{"tags":["graph-visualization"],"summary":"Filter Graph","description":"Filter graph by entity types and properties.\n\nSprint 12: Advanced filtering with degree and community support.\n\nArgs:\n    request: Filter configuration\n\nReturns:\n    Filtered subgraph","operationId":"filter_graph_api_v1_graph_viz_filter_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphFilterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Filter Graph Api V1 Graph Viz Filter Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/viz/communities/highlight":{"post":{"tags":["graph-visualization"],"summary":"Highlight Communities","description":"Highlight specific communities in graph.\n\nSprint 12: Community-based subgraph extraction.\n\nArgs:\n    request: Community highlight configuration\n\nReturns:\n    Subgraph with highlighted communities","operationId":"highlight_communities_api_v1_graph_viz_communities_highlight_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityHighlightRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Highlight Communities Api V1 Graph Viz Communities Highlight Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_upload_file_api_v1_retrieval_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_file_api_v1_retrieval_upload_post"},"CentralityMetrics":{"properties":{"entity_id":{"type":"string","title":"Entity Id","description":"Entity ID"},"degree":{"type":"number","minimum":0.0,"title":"Degree","description":"Degree centrality (number of connections)"},"betweenness":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Betweenness","description":"Betweenness centrality","default":0.0},"closeness":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Closeness","description":"Closeness centrality","default":0.0},"eigenvector":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Eigenvector","description":"Eigenvector centrality","default":0.0},"pagerank":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Pagerank","description":"PageRank score","default":0.0}},"type":"object","required":["entity_id","degree"],"title":"CentralityMetrics","description":"Centrality metrics for a graph entity.","example":{"betweenness":0.35,"closeness":0.68,"degree":15.0,"eigenvector":0.42,"entity_id":"entity_1","pagerank":0.08}},"ChatRequest":{"properties":{"query":{"type":"string","maxLength":5000,"minLength":1,"title":"Query","description":"User query"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"Session ID for conversation history. Auto-generated if not provided."},"intent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intent","description":"Optional intent override (graph, vector, hybrid)"},"include_sources":{"type":"boolean","title":"Include Sources","description":"Include source documents in response","default":true},"include_tool_calls":{"type":"boolean","title":"Include Tool Calls","description":"Include MCP tool call information in response","default":false}},"type":"object","required":["query"],"title":"ChatRequest","description":"Chat request model.","example":{"include_sources":true,"include_tool_calls":false,"query":"Was ist AEGIS RAG?","session_id":"user-123-session"}},"ChatResponse":{"properties":{"answer":{"type":"string","title":"Answer","description":"Generated answer"},"query":{"type":"string","title":"Query","description":"Original user query"},"session_id":{"type":"string","title":"Session Id","description":"Session ID for this conversation"},"intent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intent","description":"Detected query intent"},"sources":{"items":{"$ref":"#/components/schemas/SourceDocument"},"type":"array","title":"Sources","description":"Source documents used for answer generation"},"tool_calls":{"items":{"$ref":"#/components/schemas/ToolCallInfo"},"type":"array","title":"Tool Calls","description":"MCP tool calls made during query processing"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Execution metadata (latency, agent_path, etc.)"}},"type":"object","required":["answer","query","session_id"],"title":"ChatResponse","description":"Chat response model.","example":{"answer":"AEGIS RAG ist ein agentisches RAG-System...","intent":"vector","metadata":{"agent_path":["router","vector_agent","generator"],"latency_seconds":1.23},"query":"Was ist AEGIS RAG?","session_id":"user-123-session","sources":[{"score":0.92,"source":"docs/core/CLAUDE.md","text":"AEGIS RAG steht für...","title":"CLAUDE.md"}],"tool_calls":[{"arguments":{"path":"/docs/CLAUDE.md"},"duration_ms":45.2,"result":{"content":"# CLAUDE.md - AegisRAG..."},"server":"filesystem-server","success":true,"tool_name":"read_file"}]}},"CommunityHighlightRequest":{"properties":{"community_ids":{"items":{"type":"string"},"type":"array","title":"Community Ids","description":"Community IDs to highlight"},"include_neighbors":{"type":"boolean","title":"Include Neighbors","description":"Include neighbor nodes","default":false}},"type":"object","required":["community_ids"],"title":"CommunityHighlightRequest","description":"Request model for community highlighting."},"ConsolidationRequest":{"properties":{"consolidate_to_qdrant":{"type":"boolean","title":"Consolidate To Qdrant","description":"Enable Redis → Qdrant consolidation","default":true},"consolidate_conversations":{"type":"boolean","title":"Consolidate Conversations","description":"Enable Redis → Graphiti conversation consolidation","default":true},"active_sessions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Active Sessions","description":"List of active session IDs to consolidate. If None, no conversation consolidation.","examples":[["session_123","session_456"]]}},"type":"object","title":"ConsolidationRequest","description":"Request model for manual memory consolidation."},"ConsolidationResponse":{"properties":{"status":{"type":"string","title":"Status"},"started_at":{"type":"string","title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"qdrant_consolidation":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Qdrant Consolidation","description":"Statistics for Redis → Qdrant consolidation"},"conversation_consolidations":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Conversation Consolidations","description":"Results for each conversation consolidation"}},"type":"object","required":["status","started_at"],"title":"ConsolidationResponse","description":"Response model for consolidation operations."},"ConversationHistoryResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"messages":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Messages"},"message_count":{"type":"integer","title":"Message Count"}},"type":"object","required":["session_id","messages","message_count"],"title":"ConversationHistoryResponse","description":"Conversation history response."},"DependencyHealth":{"properties":{"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"latency_ms":{"type":"number","title":"Latency Ms"},"details":{"additionalProperties":true,"type":"object","title":"Details"}},"type":"object","required":["name","status","latency_ms","details"],"title":"DependencyHealth","description":"Individual dependency health."},"DetailedHealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"environment":{"type":"string","title":"Environment"},"dependencies":{"additionalProperties":{"$ref":"#/components/schemas/DependencyHealth"},"type":"object","title":"Dependencies"}},"type":"object","required":["status","version","environment","dependencies"],"title":"DetailedHealthResponse","description":"Detailed health check response."},"GraphEntity":{"properties":{"id":{"type":"string","title":"Id","description":"Unique entity ID"},"name":{"type":"string","title":"Name","description":"Entity name"},"type":{"type":"string","title":"Type","description":"Entity type (PERSON, ORGANIZATION, etc.)"},"description":{"type":"string","title":"Description","description":"Entity description","default":""},"properties":{"additionalProperties":true,"type":"object","title":"Properties","description":"Additional entity properties"},"source_document":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Document","description":"Source document ID"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","description":"Extraction confidence score","default":1.0},"version_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version Id","description":"Unique version ID"},"version_number":{"type":"integer","title":"Version Number","description":"Version sequence number","default":1},"valid_from":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Valid From","description":"Valid time start (real-world time)"},"valid_to":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Valid To","description":"Valid time end (None=current)"},"transaction_from":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Transaction From","description":"Transaction time start (database time)"},"transaction_to":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Transaction To","description":"Transaction time end (None=current)"},"changed_by":{"type":"string","title":"Changed By","description":"User/system that made the change","default":"system"},"change_reason":{"type":"string","title":"Change Reason","description":"Reason for the change","default":""}},"type":"object","required":["id","name","type"],"title":"GraphEntity","description":"Graph entity (node) representation.","example":{"confidence":0.95,"description":"Software engineer at Google","id":"entity_1","name":"John Smith","properties":{"aliases":["J. Smith","Johnny"]},"source_document":"doc_123","type":"PERSON"}},"GraphExportRequest":{"properties":{"format":{"type":"string","enum":["json","graphml","cytoscape"],"title":"Format","description":"Export format (json/graphml/cytoscape)","default":"json"},"entity_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Entity Types","description":"Filter by entity types (None = all)"},"max_nodes":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Max Nodes","description":"Maximum nodes to export","default":100},"include_communities":{"type":"boolean","title":"Include Communities","description":"Include community detection results","default":true}},"type":"object","title":"GraphExportRequest","description":"Request model for graph export."},"GraphFilterRequest":{"properties":{"entity_types":{"items":{"type":"string"},"type":"array","title":"Entity Types","description":"Entity types to include"},"min_degree":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Min Degree","description":"Minimum node degree (connections)"},"community_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Community Id","description":"Filter by community ID"}},"type":"object","required":["entity_types"],"title":"GraphFilterRequest","description":"Request model for graph filtering."},"GraphStatistics":{"properties":{"total_entities":{"type":"integer","minimum":0.0,"title":"Total Entities","description":"Total number of entities"},"total_relationships":{"type":"integer","minimum":0.0,"title":"Total Relationships","description":"Total number of relationships"},"entity_types":{"additionalProperties":{"type":"integer"},"type":"object","title":"Entity Types","description":"Count of entities by type"},"relationship_types":{"additionalProperties":{"type":"integer"},"type":"object","title":"Relationship Types","description":"Count of relationships by type"},"avg_degree":{"type":"number","minimum":0.0,"title":"Avg Degree","description":"Average node degree"},"density":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Density","description":"Graph density"},"communities":{"type":"integer","minimum":0.0,"title":"Communities","description":"Number of detected communities","default":0}},"type":"object","required":["total_entities","total_relationships","avg_degree","density"],"title":"GraphStatistics","description":"Overall graph statistics and metrics.","example":{"avg_degree":4.27,"communities":45,"density":0.0014,"entity_types":{"CONCEPT":700,"ORGANIZATION":300,"PERSON":500},"relationship_types":{"KNOWS":1200,"RELATED_TO":1550,"WORKS_AT":450},"total_entities":1500,"total_relationships":3200}},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"$ref":"#/components/schemas/src__core__models__HealthStatus","description":"Overall system health"},"version":{"type":"string","title":"Version","description":"Application version"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Check timestamp"},"services":{"additionalProperties":{"$ref":"#/components/schemas/ServiceHealth"},"type":"object","title":"Services","description":"Individual service health"}},"type":"object","required":["status","version"],"title":"HealthResponse","description":"Health check response.","example":{"services":{"neo4j":{"latency_ms":12.8,"status":"healthy"},"ollama":{"latency_ms":50.0,"status":"healthy"},"qdrant":{"latency_ms":5.2,"status":"healthy"},"redis":{"latency_ms":1.5,"status":"healthy"}},"status":"healthy","timestamp":"2025-01-15T10:00:00Z","version":"0.1.0"}},"IngestionRequest":{"properties":{"input_dir":{"type":"string","maxLength":500,"minLength":1,"title":"Input Dir","description":"Directory containing documents (relative to documents_base_path)","examples":["./data/sample_documents"]},"chunk_size":{"type":"integer","maximum":2048.0,"minimum":128.0,"title":"Chunk Size","description":"Maximum tokens per chunk","default":512},"chunk_overlap":{"type":"integer","maximum":512.0,"minimum":0.0,"title":"Chunk Overlap","description":"Overlap between chunks","default":128},"file_extensions":{"anyOf":[{"items":{"type":"string"},"type":"array","maxItems":20},{"type":"null"}],"title":"File Extensions","description":"File extensions to process (default: .pdf, .txt, .md)"}},"type":"object","required":["input_dir"],"title":"IngestionRequest","description":"Document ingestion request with enhanced validation."},"IngestionResponse":{"properties":{"status":{"type":"string","title":"Status"},"documents_loaded":{"type":"integer","title":"Documents Loaded"},"chunks_created":{"type":"integer","title":"Chunks Created"},"embeddings_generated":{"type":"integer","title":"Embeddings Generated"},"points_indexed":{"type":"integer","title":"Points Indexed"},"duration_seconds":{"type":"number","title":"Duration Seconds"},"collection_name":{"type":"string","title":"Collection Name"},"neo4j_entities":{"type":"integer","title":"Neo4J Entities","description":"Entities extracted to Neo4j","default":0},"neo4j_relationships":{"type":"integer","title":"Neo4J Relationships","description":"Relationships extracted to Neo4j","default":0}},"type":"object","required":["status","documents_loaded","chunks_created","embeddings_generated","points_indexed","duration_seconds","collection_name"],"title":"IngestionResponse","description":"Document ingestion response."},"MemorySearchRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":1,"title":"Query","description":"Search query text","examples":["What did we discuss about RAG architecture?"]},"layers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Layers","description":"Memory layers to search. If None, automatically routes based on query. Options: 'short_term', 'long_term', 'episodic'","examples":[["short_term","episodic"]]},"top_k":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Top K","description":"Maximum results per layer","default":5},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"Session ID for context-aware search","examples":["session_123abc"]},"time_window_hours":{"anyOf":[{"type":"integer","maximum":720.0,"minimum":1.0},{"type":"null"}],"title":"Time Window Hours","description":"Limit temporal search to recent N hours"}},"type":"object","required":["query"],"title":"MemorySearchRequest","description":"Request model for unified memory search."},"MemorySearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"results_by_layer":{"additionalProperties":{"items":{"$ref":"#/components/schemas/MemorySearchResult"},"type":"array"},"type":"object","title":"Results By Layer","description":"Results grouped by memory layer"},"total_results":{"type":"integer","title":"Total Results"},"layers_searched":{"items":{"type":"string"},"type":"array","title":"Layers Searched"},"search_metadata":{"additionalProperties":true,"type":"object","title":"Search Metadata","description":"Search execution metadata"}},"type":"object","required":["query","results_by_layer","total_results","layers_searched"],"title":"MemorySearchResponse","description":"Response model for memory search."},"MemorySearchResult":{"properties":{"layer":{"type":"string","title":"Layer","description":"Memory layer the result came from"},"content":{"type":"string","title":"Content","description":"Result content or text"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score","description":"Relevance score if available"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Result metadata"}},"type":"object","required":["layer","content"],"title":"MemorySearchResult","description":"Individual memory search result."},"MemoryStatsResponse":{"properties":{"short_term":{"additionalProperties":true,"type":"object","title":"Short Term","description":"Redis working memory statistics"},"long_term":{"additionalProperties":true,"type":"object","title":"Long Term","description":"Qdrant vector store statistics"},"episodic":{"additionalProperties":true,"type":"object","title":"Episodic","description":"Graphiti episodic memory statistics"},"consolidation":{"additionalProperties":true,"type":"object","title":"Consolidation","description":"Memory consolidation statistics"}},"type":"object","required":["short_term","long_term","episodic","consolidation"],"title":"MemoryStatsResponse","description":"Response model for memory system statistics."},"PointInTimeQueryRequest":{"properties":{"query":{"type":"string","maxLength":500,"minLength":1,"title":"Query","description":"Entity or query to search for at point in time","examples":["Claude AI"]},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Point in time to query (valid time)","examples":["2024-01-15T10:30:00Z"]},"top_k":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Top K","description":"Maximum results to return","default":5}},"type":"object","required":["query","timestamp"],"title":"PointInTimeQueryRequest","description":"Request model for point-in-time temporal queries."},"PointInTimeQueryResponse":{"properties":{"query":{"type":"string","title":"Query"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"results":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Results","description":"Entity states at the specified time"},"total_results":{"type":"integer","title":"Total Results"}},"type":"object","required":["query","timestamp","results","total_results"],"title":"PointInTimeQueryResponse","description":"Response model for point-in-time queries."},"Recommendation":{"properties":{"entity":{"$ref":"#/components/schemas/GraphEntity","description":"Recommended entity"},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"Recommendation score"},"reason":{"type":"string","title":"Reason","description":"Recommendation reason (similar_community, connected, similar_attributes)"}},"type":"object","required":["entity","score","reason"],"title":"Recommendation","description":"Entity recommendation with score and reason.","example":{"entity":{"confidence":0.92,"description":"Data scientist at Google","id":"entity_2","name":"Jane Doe","properties":{},"source_document":"doc_2","type":"PERSON"},"reason":"similar_community","score":0.85}},"SearchRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":1,"title":"Query","description":"Search query text","examples":["What is RAG?"]},"top_k":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Top K","description":"Number of results to return","default":10},"search_type":{"type":"string","pattern":"^(vector|bm25|hybrid)$","title":"Search Type","description":"Search type: 'vector', 'bm25', or 'hybrid'","default":"hybrid"},"score_threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Score Threshold","description":"Minimum similarity score for vector search"},"use_reranking":{"type":"boolean","title":"Use Reranking","description":"Apply cross-encoder reranking for improved relevance (Sprint 3)","default":true},"rerank_top_k":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Rerank Top K","description":"Number of candidates to rerank (default: 2*top_k)"},"filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Filters","description":"Metadata filters for targeted search (Sprint 3)","examples":[{"created_after":"2024-01-01T00:00:00","doc_type_in":["pdf","md"],"tags_contains":["tutorial"]}]}},"type":"object","required":["query"],"title":"SearchRequest","description":"Search request model with enhanced validation."},"SearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"},"total_results":{"type":"integer","title":"Total Results"},"search_type":{"type":"string","title":"Search Type"},"search_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Search Metadata"}},"type":"object","required":["query","results","total_results","search_type"],"title":"SearchResponse","description":"Search response model."},"SearchResult":{"properties":{"id":{"type":"string","title":"Id"},"text":{"type":"string","title":"Text"},"score":{"type":"number","title":"Score"},"source":{"type":"string","title":"Source"},"document_id":{"type":"string","title":"Document Id"},"rank":{"type":"integer","title":"Rank"},"rrf_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rrf Score"},"rerank_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rerank Score","description":"Cross-encoder relevance score"},"normalized_rerank_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Normalized Rerank Score","description":"Normalized rerank score (0-1)"},"original_rrf_rank":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Original Rrf Rank","description":"Rank before reranking"},"final_rank":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Final Rank","description":"Rank after reranking"}},"type":"object","required":["id","text","score","source","document_id","rank"],"title":"SearchResult","description":"Single search result."},"ServiceHealth":{"properties":{"status":{"$ref":"#/components/schemas/src__core__models__HealthStatus","description":"Service health status"},"latency_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latency Ms","description":"Service response latency"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if unhealthy"}},"type":"object","required":["status"],"title":"ServiceHealth","description":"Health status for a single service."},"SessionContextResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"messages":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Messages","description":"Conversation messages in the session"},"message_count":{"type":"integer","title":"Message Count"},"summary":{"additionalProperties":true,"type":"object","title":"Summary","description":"Session summary across layers"}},"type":"object","required":["session_id","messages","message_count"],"title":"SessionContextResponse","description":"Response model for session context retrieval."},"SessionInfo":{"properties":{"session_id":{"type":"string","title":"Session Id"},"message_count":{"type":"integer","title":"Message Count"},"last_activity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Activity"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["session_id","message_count"],"title":"SessionInfo","description":"Session information."},"SessionListResponse":{"properties":{"sessions":{"items":{"$ref":"#/components/schemas/SessionInfo"},"type":"array","title":"Sessions"},"total_count":{"type":"integer","title":"Total Count"}},"type":"object","required":["sessions","total_count"],"title":"SessionListResponse","description":"List of sessions response."},"SourceDocument":{"properties":{"text":{"type":"string","title":"Text","description":"Document text content"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"Document title"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source","description":"Source file path"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score","description":"Relevance score"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional metadata"}},"type":"object","required":["text"],"title":"SourceDocument","description":"Source document metadata."},"TokenRequest":{"properties":{"username":{"type":"string","title":"Username","description":"Username"},"password":{"type":"string","title":"Password","description":"Password"}},"type":"object","required":["username","password"],"title":"TokenRequest","description":"Token request model."},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"TokenResponse","description":"Token response model."},"ToolCallInfo":{"properties":{"tool_name":{"type":"string","title":"Tool Name","description":"Name of the MCP tool called"},"server":{"type":"string","title":"Server","description":"MCP server name"},"arguments":{"additionalProperties":true,"type":"object","title":"Arguments","description":"Tool call arguments"},"result":{"anyOf":[{},{"type":"null"}],"title":"Result","description":"Tool call result"},"duration_ms":{"type":"number","title":"Duration Ms","description":"Tool call duration in milliseconds"},"success":{"type":"boolean","title":"Success","description":"Whether tool call succeeded"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"}},"type":"object","required":["tool_name","server","duration_ms","success"],"title":"ToolCallInfo","description":"MCP tool call information."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VisualizationResponse":{"properties":{"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Visualization data in requested format"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata (node_count, edge_count, etc.)"}},"type":"object","required":["data","metadata"],"title":"VisualizationResponse","description":"Graph visualization response."},"src__api__v1__chat__SessionDeleteResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["session_id","status","message"],"title":"SessionDeleteResponse","description":"Session deletion response."},"src__api__v1__health__HealthStatus":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"environment":{"type":"string","title":"Environment"}},"type":"object","required":["status","version","environment"],"title":"HealthStatus","description":"Health check status."},"src__api__v1__memory__SessionDeleteResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"deleted":{"type":"boolean","title":"Deleted"},"message":{"type":"string","title":"Message"}},"type":"object","required":["session_id","deleted","message"],"title":"SessionDeleteResponse","description":"Response model for session deletion."},"src__core__models__HealthStatus":{"type":"string","enum":["healthy","degraded","unhealthy"],"title":"HealthStatus","description":"Health check status."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}