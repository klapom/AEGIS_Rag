# Claude Code Prompt Templates
## Systematische Subagenten-Delegation

Nutze diese Templates f√ºr konsistente Subagenten-Delegation in Claude Code.

---

## Template 1: Sprint Start (Wochenanfang)

```
Sprint {N} Start - {Sprint Name}

üìã KONTEXT:
- Sprint-Ziel: {aus SPRINT_PLAN.md kopieren}
- Dauer: 5 Arbeitstage
- Team-Kapazit√§t: {Story Points}

üìñ REFERENZEN:
- CLAUDE.md: Projekt-Context
- SPRINT_PLAN.md: Sprint {N} Deliverables
- SUBAGENTS.md: Delegation Strategy
- ADR_INDEX.md: Relevante ADRs

üéØ AUFGABEN DIESER WOCHE:
{Liste aus SPRINT_PLAN.md}

ü§ù SUBAGENTEN-DELEGATION:
Bitte plane die optimale Subagenten-Verteilung:
1. Analysiere alle Tasks
2. Identifiziere Abh√§ngigkeiten
3. Schlage vor: Parallel vs. Sequential
4. Definiere Handoff-Punkte

WICHTIG:
- Nutze SUBAGENTS.md f√ºr Responsibilities
- Beachte File Ownership
- Plane Kontext-Sharing
```

---

## Template 2: Feature Implementation (Standard Task)

```
Feature: {Feature Name}

üìã KONTEXT:
- Sprint: {N}
- Component: {z.B. Vector Search, Graph RAG, Memory}
- Referenz: CLAUDE.md Section "{relevante Section}"

üéØ REQUIREMENTS:
{Detaillierte Anforderungen}

üîó ABH√ÑNGIGKEITEN:
- Ben√∂tigt: {andere Module/Services}
- Blockiert: {andere Tasks}

üë• SUBAGENTEN-ASSIGNMENT (OBLIGATORISCH):

**Backend Agent:**
- Implementiere Core Logic
- File: src/components/{component}/{module}.py
- Standards: NAMING_CONVENTIONS.md
- Tests: >80% Coverage erforderlich

**API Agent:**
- Endpoint: POST /api/v1/{endpoint}
- Request/Response Models
- OpenAPI Documentation
- Rate Limiting: 10/min per user

**Testing Agent:**
- Unit Tests: tests/unit/components/{component}/
- Integration Tests: tests/integration/
- Fixtures in conftest.py
- Mock External Dependencies

**Infrastructure Agent:**
- Docker: Neue Services falls erforderlich
- Environment Variables in .env.template
- CI Pipeline: Update falls neue Dependencies

**Documentation Agent:**
- API Docs: docs/api/{endpoint}.md
- Code Examples
- README.md Update falls n√∂tig

‚ö†Ô∏è ADR-CHECK:
- Ist dies eine Architektur-Entscheidung? {Ja/Nein}
- Falls JA: ADR-XXX erstellen vor Implementation

üéØ SUCCESS CRITERIA:
- Alle Tests gr√ºn
- Coverage >80%
- Dokumentation vollst√§ndig
- Keine Pre-commit Errors
- Performance Targets erf√ºllt: {Latency/Throughput}
```

---

## Template 3: Bug Fix (Fokussierte Aufgabe)

```
Bug Fix: {Issue #XXX - Bug Title}

üêõ PROBLEM:
{Beschreibung des Bugs}

üìã KONTEXT:
- Affected Component: {Component}
- Severity: {Low/Medium/High/Critical}
- User Impact: {Beschreibung}

üîç ROOT CAUSE ANALYSIS:
{Falls bekannt, sonst: "Zu ermitteln"}

üë• SUBAGENTEN-ASSIGNMENT:

**Backend Agent:**
- Debugge Root Cause
- Implementiere Fix in {betroffene Files}
- Folge NAMING_CONVENTIONS.md

**Testing Agent:**
- Regression Test f√ºr diesen Bug
- Existierende Tests erweitern
- Edge Cases abdecken

**Documentation Agent:**
- Update CLAUDE.md "Common Issues" falls recurring
- Update QUICK_START.md Troubleshooting falls Setup-Issue

‚ö†Ô∏è KEIN ADR erforderlich (Bug Fix, keine Design-√Ñnderung)

‚úÖ DEFINITION OF DONE:
- Bug nicht mehr reproduzierbar
- Test verhindert Regression
- Root Cause dokumentiert
```

---

## Template 4: ADR-pflichtige √Ñnderung

```
Architecture Decision: {Entscheidungs-Titel}

üìã KONTEXT:
- Current State: {Was ist aktuell}
- Problem: {Warum √§ndern}
- Impact: {Wer/Was ist betroffen}

ü§î ALTERNATIVEN:
1. {Option 1}
   Pro: ...
   Contra: ...
2. {Option 2}
   Pro: ...
   Contra: ...
3. {Gew√§hlte Option}
   Pro: ...
   Contra: ...
   Rationale: {Warum gew√§hlt}

‚ö†Ô∏è ADR ERFORDERLICH - ERSTELLE ZUERST:

**Documentation Agent:**
1. Erstelle docs/ADR/ADR-{XXX}-{title}.md
2. Nutze ADR_TEMPLATE aus ADR_INDEX.md
3. Dokumentiere alle 3 Alternativen
4. F√ºlle Rationale + Consequences aus
5. Update ADR_INDEX.md

**Team Review des ADR:**
- [ ] Tech Lead Approval
- [ ] Team Consensus
- [ ] Consequences verstanden
- [ ] Mitigations definiert

NUR DANN Implementation:

**Backend Agent:**
- Implementiere gew√§hlte Option
- Referenziere ADR-XXX in Code Comments

**Infrastructure Agent:**
- Setup neue Infrastruktur falls erforderlich
- Update docker-compose.yml, CI/CD

**Testing Agent:**
- Teste neue Implementation
- Performance Benchmarks vor/nach

**Documentation Agent:**
- Update TECH_STACK.md
- Update CLAUDE.md mit neuen Patterns
```

---

## Template 5: Sprint Review (Wochenende)

```
Sprint {N} Review & Retrospective

üìä DELIVERABLES CHECK:
Gem√§√ü SPRINT_PLAN.md Sprint {N}:
- [ ] Deliverable 1: {Status}
- [ ] Deliverable 2: {Status}
- [ ] ...

‚úÖ SUCCESS CRITERIA:
- [ ] Alle Tests gr√ºn
- [ ] Coverage >80%
- [ ] CI Pipeline gr√ºn
- [ ] Documentation vollst√§ndig
- [ ] Demo erfolgreich

üë• SUBAGENTEN PERFORMANCE:
**Backend Agent:**
- Tasks completed: {Anzahl}
- Rework rate: {Prozent}
- Code quality: {Score}

**Infrastructure Agent:**
- Deployment successful: {Ja/Nein}
- Incidents: {Anzahl}

{... f√ºr alle Subagenten}

üîÑ RETROSPECTIVE:
**What went well:**
- ...

**What needs improvement:**
- ...

**Action Items f√ºr n√§chsten Sprint:**
- [ ] Action 1
- [ ] Action 2

üìã DOCUMENTATION UPDATES:
- [ ] SPRINT_PLAN.md: Sprint {N} als "completed" markieren
- [ ] CLAUDE.md: "Common Issues" erweitern falls neue gefunden
- [ ] TECH_STACK.md: Update falls Dependencies ge√§ndert
- [ ] ADR_INDEX.md: Neue ADRs hinzuf√ºgen

üöÄ SPRINT {N+1} VORBEREITUNG:
- Lies SPRINT_PLAN.md Sprint {N+1}
- Identifiziere Blockers
- Plane Subagenten-Delegation
```

---

## Template 6: Emergency Hotfix

```
HOTFIX: {Critical Issue}

üö® SEVERITY: CRITICAL
- Production down: {Ja/Nein}
- User impact: {Beschreibung}
- Time since incident: {Minuten}

üéØ IMMEDIATE ACTION:

**Backend Agent (PRIORITY):**
- Schnellste L√∂sung implementieren
- Code Quality tempor√§r zweitrangig
- Fokus: System stabilisieren

**Testing Agent:**
- Minimale Tests f√ºr Hotfix
- Full Test Suite sp√§ter

**Infrastructure Agent:**
- Deploy Hotfix ASAP
- Rollback-Plan bereit

‚ö†Ô∏è POST-HOTFIX (nach Stabilisierung):
- [ ] Root Cause Analysis dokumentieren
- [ ] Proper Fix mit Tests implementieren
- [ ] ADR falls Architektur-√Ñnderung
- [ ] Post-Mortem Document erstellen
```

---

## Template 7: Dependency Update

```
Dependency Update: {Package Name} {Old Version} ‚Üí {New Version}

üìã KONTEXT:
- Package: {Name}
- Change Type: {Patch/Minor/Major}
- Reason: {Security/Feature/Bug Fix}

üîç BREAKING CHANGES:
{Aus Changelog/Migration Guide}

üë• SUBAGENTEN-ASSIGNMENT:

**Infrastructure Agent:**
- Update pyproject.toml / requirements.txt
- Update docker-compose.yml falls Image Update
- Test Docker Build

**Backend Agent:**
- Code-√Ñnderungen f√ºr Breaking Changes
- Update Imports falls API ge√§ndert

**Testing Agent:**
- Komplette Test Suite ausf√ºhren
- Integration Tests fokussieren
- Performance Regression pr√ºfen

**Documentation Agent:**
- Update TECH_STACK.md mit neuer Version
- Migration Notes falls Major Update

‚ö†Ô∏è ADR-CHECK:
- Major Version Update? ‚Üí Erw√§ge ADR
- Breaking Changes? ‚Üí ADR erforderlich
```

---

## Template 8: Code Review Feedback

```
Address Review Feedback: PR #{Number}

üìã FEEDBACK SUMMARY:
{Zusammenfassung der Review Comments}

üë• SUBAGENTEN ZUR BEHEBUNG:

**Backend Agent:**
Behebt folgende Code-Issues:
- {Issue 1}
- {Issue 2}

**Testing Agent:**
Erweitert Tests f√ºr:
- {Coverage Gap 1}
- {Edge Case 2}

**Documentation Agent:**
Verbessert Documentation f√ºr:
- {Missing Docstring 1}
- {Unclear API Doc 2}

‚úÖ RE-REVIEW CRITERIA:
- Alle Reviewer Comments addressed
- Neue Tests f√ºr Coverage Gaps
- Documentation vollst√§ndig
- Keine neuen Issues introduced
```

---

## Automatisierung: Prompt-Template-Selector

```python
# scripts/select_prompt_template.py
def select_template(task_type: str) -> str:
    """
    W√§hlt das passende Prompt Template basierend auf Task-Typ.
    
    Usage in Claude Code:
    "Bitte nutze Template f√ºr {task_type}"
    """
    templates = {
        "sprint_start": "Template 1: Sprint Start",
        "feature": "Template 2: Feature Implementation",
        "bug": "Template 3: Bug Fix",
        "adr": "Template 4: ADR-pflichtige √Ñnderung",
        "sprint_review": "Template 5: Sprint Review",
        "hotfix": "Template 6: Emergency Hotfix",
        "dependency": "Template 7: Dependency Update",
        "review": "Template 8: Code Review Feedback",
    }
    return templates.get(task_type, "Template 2: Feature Implementation")
```

---

## Enforcement durch CODEOWNERS

```
# .github/CODEOWNERS
# Automatische Reviewer-Zuweisung basierend auf File

# Backend Agent Territory
src/agents/**                 @backend-team
src/components/**             @backend-team
src/core/**                   @backend-team
src/utils/**                  @backend-team

# Infrastructure Agent Territory
docker/**                     @infrastructure-team
k8s/**                        @infrastructure-team
.github/workflows/**          @infrastructure-team
scripts/setup*.sh             @infrastructure-team

# API Agent Territory
src/api/**                    @api-team
src/models/**                 @api-team

# Testing Agent Territory
tests/**                      @testing-team

# Documentation Agent Territory
docs/**                       @documentation-team
README.md                     @documentation-team
*.md                          @documentation-team

# ADRs require Tech Lead
docs/ADR/**                   @tech-lead @backend-team

# Critical configs require multiple approvals
pyproject.toml                @backend-team @infrastructure-team
docker-compose.yml            @infrastructure-team @backend-team
```

---

## Daily Checklist f√ºr Claude Code Sessions

**JEDEN TAG vor Start:**
```
[ ] CLAUDE.md gelesen (Project Context aktuell?)
[ ] SPRINT_PLAN.md gecheckt (heutiges Ziel klar?)
[ ] Template ausgew√§hlt (passendes Template f√ºr Task?)
[ ] Subagenten geplant (welche Agents heute?)
[ ] ADR-Check (brauche ich ADR heute?)
```

**JEDEN TAG nach Session:**
```
[ ] Alle Subagenten korrekt eingesetzt?
[ ] Tests geschrieben (>80% Coverage)?
[ ] Documentation aktualisiert?
[ ] Commit Message folgt Convention?
[ ] ADR erstellt falls erforderlich?
[ ] SPRINT_PLAN.md Progress aktualisiert?
```

---

## Nutzung in Claude Code

**Beispiel Session-Start:**
```
Hey Claude!

Context: Ich starte heute mit Sprint 2, Tag 1.

Bitte:
1. Lies CLAUDE.md (Project Context)
2. Lies SPRINT_PLAN.md Sprint 2
3. Lies SUBAGENTS.md (Delegation Guide)
4. Nutze "Template 1: Sprint Start"

Plane dann die Woche optimal mit Subagenten-Delegation.
```

**Beispiel Feature Start:**
```
Hey Claude!

Task: Implementiere Hybrid Search (Sprint 2, Tag 2)

Bitte:
1. Nutze "Template 2: Feature Implementation"
2. Delegiere an alle relevanten Subagenten
3. Erstelle ADR falls Architektur-Entscheidung

Kontext ist in CLAUDE.md Section "Hybrid Search Implementation"
```

---

Diese Templates stellen sicher, dass du IMMER systematisch vorgehst und keine Subagenten vergisst!
